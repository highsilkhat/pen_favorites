<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
</head>

<body>
    <H1> Howdy, {{ session['first_name'] }}!!!</H1>
    <h2>All TV Shows</h2>

    <button onclick="window.location.href='/logout'">Logout</button>

    {% with messages = get_flashed_messages() %}
    {% if messages %}
    {% for message in messages %}
    <p>{{message}}</p>
    {% endfor %}
    {% endif %}
    {% endwith %}

    <table>
        <thead>
            <tr>
                <th>Title</th>
                <th>Network</th>
                <th>Release Date</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for show in likes %}
            <tr>
                <td> {{ show.title }}</td>
                <td> {{ show.network }}</td>
                <td> {{ show.release_date.strftime('%Y-%m-%d') }}</td>
                <td>

                    <a href="/show/{{ show.id}}">show</a>

                    {% if show.user_id == session['user_id'] %}

                    | <a href="/edit/{{ show.id }}">edit</a>

                    | <a href="/delete/{{ show.id }}">delete</a>

                    {% endif %}

                    {% if show.user_id != session['user_id'] %}

                    | <a href="/unlike/{{ show.id }}">unlike</a>
                    {% endif %}
                    {% endfor %}
                </td>
            </tr>
            {% for show in unlikes %}
            <tr>
                <td> {{ show.title }}</td>
                <td> {{ show.network }}</td>
                <td> {{ show.release_date.strftime('%Y-%m-%d') }}</td>
                <td>

                    <a href="/show/{{ show.id}}">show</a>

                    {% if show.user_id == session['user_id'] %}

                    | <a href="/edit/{{ show.id }}">edit</a>

                    | <a href="/delete/{{ show.id }}">delete</a>

                    {% endif %}

                    {% if show.user_id != session['user_id'] %}

                    | <a href="/like/{{ show.id }}">like</a>
                    {% endif %}
                    {% endfor %}
                </td>
            </tr>

        </tbody>
    </table>



    <button onclick="window.location.href='/new'">Add a New Show</button>

</body>

</html>